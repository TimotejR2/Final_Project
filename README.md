# Energy Cauculator
#### Video Demo:  https://youtu.be/set2s2uzYBg
## Introduction: 
In days when energy prices are climbing, there are a lot of factors to consider in saving money. One of the easiest ways to save money is by investing in more energy-saving appliances. Light bulbs are a great example of how much you can save for a relatively small cost. Therefore, I have created this web-based application to help users understand how much money they can save by changing light bulbs.

## How to Use: 
You can use the URL: https://energycalculator.vercel.app/ or run it locally on your computer. To run it locally, you need to install Python, Flask, and Werkzeug (see [requirements.txt](/requirements.txt)). You can run the program by opening the folder with the code in the terminal and typing 
``` flask run ```
 All information about using the app is in the "How to Use" section of the website.
Here are three steps on how to use the app after you run it:
1. Select "calculator" from the top menu.
2. Provide data:
   - Daily average (h): How many hours do you use a lightbulb every day?
   - Amount: How many lightbulbs do you want to replace?
   - Country: In which country are the lightbulbs? (Data about electricity prices is only for countries in the EU. For other countries, use 0.15â‚¬/kWh.)
   - Price: How much does the lightbulb cost?
   - Watts: What is the power of the lightbulb in watts?
   - Type: What type is the lightbulb? (If unsure, use "Average.")
3. See results.

## Data: 
All technical data are stored in the [data.db](/static/data.db). The schema of the data looks like this:
```
CREATE TABLE IF NOT EXISTS "co2"("Country" TEXT, "Code" TEXT, "Year" SMALLINT, "CO2" FLOAT);

CREATE TABLE IF NOT EXISTS "price"("Country" TEXT, price FLOAT);

CREATE TABLE IF NOT EXISTS "light_bulbs" (name TEXT, lifetime SMALLINT, watts TINYINT, co2 FLOAT, price FLOAT, lumens SMALLINT);
```
- The co2 table contains data about how many grams of CO2 are produced in every country to generate 1 kWh of electricity. The table also includes the names of countries, their codes, and the year from which the data originated. The list of countries includes not only individual countries but also global regions or the entire world. This data is sourced from [Our World in Data](https://ourworldindata.org/grapher/carbon-intensity-electricity).
- The price table contains data about energy prices in Europe from 2023. The source of this data is [eurostat](https://ec.europa.eu/eurostat/databrowser/bookmark/31078871-d239-4f22-94f3-5b5aaebb5877?lang=en).
- The light_bulbs table includes data about light bulbs. The table contains information about their names, average lifetime, power in watts, CO2 emissions during manufacture, price, and lumens.

## Files Descriptions:
### [vercel.json](vercel.json):
The vercel.json file is only necessary for running the Vercel server. You can safely remove it if you don't intend to use Vercel.
### \_\_pycache\_\_ :
The __pycache__ folder is automatically generated by Flask. This file is not important unless you are running the Flask server.
### [requirements.txt](requirements.txt):
The requirements.txt file is a list of essential dependencies that you need to install to run the server successfully.
### [Static Folder](/static/):
In the static folder, you will find the following files: data.db, script.js, and style.css.
### [script.js](/static/script.js):
This file contains two functions: show_info() and a scroll function.
- show_info() is activated when the user clicks the button to show more information in the /how section. The function automatically adds more text when it's hidden or hides it when it's displayed.
- The second function hides the header when the user is scrolling down and shows it when the user is at the top of the page. This function serves an aesthetic purpose and may slightly decrease the user experience on older smartphones.
### [Templates Folder](/templates/):
The templates folder contains HTML templates that are rendered by the Python app.


## [App.py](/app.py): 
The app.py file serves as the main and sole Python code running on the server. The code is divided into three main parts:

### 1. Initialization:
- Importing libraries and reading data from the database into memory. 
- Reading data at the start of the program enhances speed while utilizing a slightly higher amount of memory. This approach also aids in mitigating SQL injections and other potential attacks.
### 2. Routes:
- The application defines three routes: "/", "/about", and "/how". Each route returns the corresponding rendered template.
### 3. Calculation Route ("/calc"):
This section represents the most complex part of the code, encompassing both the GET and POST methods.
- GET Method:
  - Executed when the method is GET, indicating that the user has not submitted any data yet. The function returns HTML code allowing the user to input data.
- POST Method:
  - Begins by checking the user's input data. If any of them is missing, the program returns an error message.
  - Reads data from the user and retrieves values from the databases for the specific case.
  - Generates the size of graphs and all necessary values.
  - Calculates "quick facts" and returns the result to the user.

#### Optimization note:
 Due to the limited bandwidth on the Vercel server, images are not directly included in my project. Instead, all images are linked to other servers. While this approach may slightly slow down loading times and could result in improper display in some instances, it was necessary for economic reasons.
